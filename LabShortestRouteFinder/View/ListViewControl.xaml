<UserControl x:Class="LabShortestRouteFinder.View.ListViewControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- DataGrid for managing routes -->
        <DataGrid Grid.Row="0" 
                  ItemsSource="{Binding Routes}" 
                  AutoGenerateColumns="False"
                  EnableRowVirtualization="True"
                  VirtualizingPanel.IsVirtualizing="True"
                  VirtualizingPanel.VirtualizationMode="Standard"
                  Margin="10">
            <DataGrid.Columns>
                <!-- Start City Column -->
                <DataGridTemplateColumn Header="Start" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Start.Name}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <!-- ComboBox for selecting the Start city -->
                            <ComboBox ItemsSource="{Binding Path=DataContext.Cities, 
                                      RelativeSource={RelativeSource FindAncestor, 
                                      AncestorType={x:Type UserControl}}}"
                                      DisplayMemberPath="Name"
                                      SelectedItem="{Binding Start}"
                                      HorizontalAlignment="Stretch"
                                      VerticalAlignment="Center"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>

                <!-- Destination City Column -->
                <DataGridTemplateColumn Header="Destination" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Destination.Name}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <!-- ComboBox for selecting the Destination city -->
                            <ComboBox ItemsSource="{Binding Path=DataContext.Cities, 
                                      RelativeSource={RelativeSource FindAncestor, 
                                      AncestorType={x:Type UserControl}}}"
                                      DisplayMemberPath="Name"
                                      SelectedItem="{Binding Destination}"
                                      HorizontalAlignment="Stretch"
                                      VerticalAlignment="Center"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>

                <!-- Distance Column -->
                <DataGridTextColumn Header="Distance (km)" 
                                  Binding="{Binding Distance, UpdateSourceTrigger=PropertyChanged}" 
                                  Width="auto"/>
                <!-- Cost Column -->
                <DataGridTextColumn Header="Cost (SEK)" 
                                  Binding="{Binding Cost, UpdateSourceTrigger=PropertyChanged}" 
                                  Width="auto"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Button for saving routes -->
        <Button Grid.Row="1" 
                Content="Save Routes" 
                Command="{Binding SaveRoutesCommand}" 
                HorizontalAlignment="Right"
                Margin="10"
                Padding="10,5"
                Width="100"/>
    </Grid>
</UserControl>
